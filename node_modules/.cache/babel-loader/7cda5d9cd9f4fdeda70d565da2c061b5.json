{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chamald\\\\Desktop\\\\Chamal\\\\react\\\\react-app\\\\src\\\\app\\\\views\\\\admin\\\\patient\\\\newPatient\\\\stepper\\\\stepComponents\\\\patientSummery\\\\PatientSummeryBase.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport withReducer from \"../../../../../../../store/withReducer\";\nimport reducer from \"./store/reducers\";\nimport PatientBasicInformation from \"./components/PatientBasicInformation\";\nimport PatientSocialHabitReport from \"./components/PatientSocialHabitReport\";\nimport { useDispatch } from \"react-redux\";\nimport * as Actions from './store/actions';\nimport PatientFamilyDiseases from \"./components/PatientFamilyDiseases/PatientFamilyDiseases\";\nimport CheckupMedicalTestResults from \"./components/CheckupMedicalTestResults/CheckupMedicalTestResults\";\nimport CheckupDiagnosis from \"./components/CheckupDiagnosis\";\nimport { getStorageItem } from \"../../../../../../../../utils/StorageUtils\";\nimport Constants from \"../../../../../../../../utils/Constants\";\nimport CheckupDietaryHabit from \"./components/CheckupDietaryHabit\";\nimport CheckupPhysicalActivity from \"./components/CheckupPhysicalActivity\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst downloadFile = (url, fileName) => {\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = fileName; // a.target = '_blank';\n\n  a.click();\n};\n\nconst createBlob = fileName => {\n  if (!_.isEmpty(fileName)) {\n    let fileURL = Constants.REPORT_BASE_URL + fileName;\n    downloadFile(fileURL, fileName);\n  }\n};\n\nconst PatientSummeryBase = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    let storagePatientID = getStorageItem(Constants.STORAGE.PATIENT_ID);\n    let storageCheckupID = getStorageItem(Constants.STORAGE.CHECKUP_ID);\n    let patientID = storagePatientID;\n    let checkupID = storageCheckupID;\n\n    if (patientID) {\n      dispatch(Actions.getPatientSocialHabits({\n        patientID: patientID\n      }));\n      dispatch(Actions.getPatientFamilyDiseasesList({\n        patientID: patientID\n      }));\n      dispatch(Actions.getPatientDTOByID(patientID));\n      console.log(\"Patient ID\", patientID);\n    }\n\n    if (checkupID) {\n      let searchObj = {\n        checkupID: checkupID\n      };\n      dispatch(Actions.getCheckupDTOByID(checkupID));\n      dispatch(Actions.getCheckupMedicalTestResultsList(searchObj));\n      dispatch(Actions.getCheckupDiagnosisList(searchObj));\n      dispatch(Actions.getCheckupFollowUp(searchObj));\n      dispatch(Actions.getCheckupFitToWork(searchObj));\n      dispatch(Actions.getDietaryHabitsList(searchObj));\n      dispatch(Actions.getPhysicalActivitiesList(searchObj));\n      dispatch(Actions.getCheckupDietNoteByCheckupID(searchObj));\n      dispatch(Actions.getCheckupFitnessNoteByCheckupID(searchObj));\n      dispatch(Actions.getCheckupInstructionNoteByCheckupID(searchObj));\n      console.log(\"Checkup ID\", checkupID);\n    }\n  }, [dispatch]);\n\n  const downloadReport = () => {\n    let checkupID = getStorageItem(Constants.STORAGE.CHECKUP_ID);\n\n    if (checkupID) {\n      let searchObject = Object.assign({}, {\n        checkupID: checkupID\n      }, {\n        includeSocialHabitData: true,\n        includeFamilyHistory: true,\n        includeDietaryHabits: true,\n        includePhysicalActivities: true,\n        includeInstruction: true\n      });\n      dispatch(Actions.getCheckUpsDetailCSVReport(searchObject)).then(response => {\n        let fileName = response.payload; // createBlob(fileName);    //FIXME here to download the file from the public link\n\n        dispatch(Actions.downloadCheckUpsByDateDetailCSVReport(fileName));\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PatientBasicInformation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PatientSocialHabitReport, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PatientFamilyDiseases, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CheckupMedicalTestResults, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CheckupDiagnosis, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CheckupDietaryHabit, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CheckupPhysicalActivity, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-row flex-wrap  justify-content-end\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PatientSummeryBase, \"rAh3tY+Iv6hWC9AI4Dm+rCbkwNE=\", false, function () {\n  return [useDispatch];\n});\n\n_c = PatientSummeryBase;\nexport default withReducer('patientSummery', reducer)(PatientSummeryBase);\n\nvar _c;\n\n$RefreshReg$(_c, \"PatientSummeryBase\");","map":{"version":3,"sources":["C:/Users/chamald/Desktop/Chamal/react/react-app/src/app/views/admin/patient/newPatient/stepper/stepComponents/patientSummery/PatientSummeryBase.js"],"names":["React","useEffect","withReducer","reducer","PatientBasicInformation","PatientSocialHabitReport","useDispatch","Actions","PatientFamilyDiseases","CheckupMedicalTestResults","CheckupDiagnosis","getStorageItem","Constants","CheckupDietaryHabit","CheckupPhysicalActivity","downloadFile","url","fileName","a","document","createElement","href","download","click","createBlob","_","isEmpty","fileURL","REPORT_BASE_URL","PatientSummeryBase","dispatch","storagePatientID","STORAGE","PATIENT_ID","storageCheckupID","CHECKUP_ID","patientID","checkupID","getPatientSocialHabits","getPatientFamilyDiseasesList","getPatientDTOByID","console","log","searchObj","getCheckupDTOByID","getCheckupMedicalTestResultsList","getCheckupDiagnosisList","getCheckupFollowUp","getCheckupFitToWork","getDietaryHabitsList","getPhysicalActivitiesList","getCheckupDietNoteByCheckupID","getCheckupFitnessNoteByCheckupID","getCheckupInstructionNoteByCheckupID","downloadReport","searchObject","Object","assign","includeSocialHabitData","includeFamilyHistory","includeDietaryHabits","includePhysicalActivities","includeInstruction","getCheckUpsDetailCSVReport","then","response","payload","downloadCheckUpsByDateDetailCSVReport"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport withReducer from \"../../../../../../../store/withReducer\";\nimport reducer from \"./store/reducers\";\nimport PatientBasicInformation from \"./components/PatientBasicInformation\";\nimport PatientSocialHabitReport from \"./components/PatientSocialHabitReport\";\nimport {useDispatch} from \"react-redux\";\nimport * as Actions from './store/actions'\nimport PatientFamilyDiseases from \"./components/PatientFamilyDiseases/PatientFamilyDiseases\";\nimport CheckupMedicalTestResults from \"./components/CheckupMedicalTestResults/CheckupMedicalTestResults\";\nimport CheckupDiagnosis from \"./components/CheckupDiagnosis\";\nimport {getStorageItem} from \"../../../../../../../../utils/StorageUtils\";\nimport Constants from \"../../../../../../../../utils/Constants\";\nimport CheckupDietaryHabit from \"./components/CheckupDietaryHabit\";\nimport CheckupPhysicalActivity from \"./components/CheckupPhysicalActivity\";\n\n\nconst downloadFile = (url, fileName) => {\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = fileName;\n    // a.target = '_blank';\n    a.click();\n};\n\nconst createBlob = (fileName) => {\n    if (!_.isEmpty(fileName)) {\n        let fileURL = Constants.REPORT_BASE_URL + fileName;\n        downloadFile(fileURL, fileName);\n    }\n};\n\n\nconst PatientSummeryBase = () => {\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n\n        let storagePatientID = getStorageItem(Constants.STORAGE.PATIENT_ID);\n        let storageCheckupID = getStorageItem(Constants.STORAGE.CHECKUP_ID);\n        let patientID = storagePatientID;\n        let checkupID = storageCheckupID;\n\n        if (patientID) {\n            dispatch(Actions.getPatientSocialHabits({patientID: patientID}));\n            dispatch(Actions.getPatientFamilyDiseasesList({patientID: patientID}));\n            dispatch(Actions.getPatientDTOByID(patientID));\n            console.log(\"Patient ID\", patientID);\n        }\n\n        if (checkupID) {\n            let searchObj = {checkupID: checkupID};\n\n            dispatch(Actions.getCheckupDTOByID(checkupID));\n            dispatch(Actions.getCheckupMedicalTestResultsList(searchObj));\n            dispatch(Actions.getCheckupDiagnosisList(searchObj));\n            dispatch(Actions.getCheckupFollowUp(searchObj));\n            dispatch(Actions.getCheckupFitToWork(searchObj));\n            dispatch(Actions.getDietaryHabitsList(searchObj));\n            dispatch(Actions.getPhysicalActivitiesList(searchObj));\n\n\n            dispatch(Actions.getCheckupDietNoteByCheckupID(searchObj));\n            dispatch(Actions.getCheckupFitnessNoteByCheckupID(searchObj));\n            dispatch(Actions.getCheckupInstructionNoteByCheckupID(searchObj));\n\n            console.log(\"Checkup ID\", checkupID);\n        }\n    }, [dispatch]);\n\n\n    const downloadReport = () => {\n        let checkupID = getStorageItem(Constants.STORAGE.CHECKUP_ID);\n        if (checkupID) {\n            let searchObject = Object.assign({}, {checkupID: checkupID},\n\n                {\n                    includeSocialHabitData: true,\n                    includeFamilyHistory: true,\n                    includeDietaryHabits: true,\n                    includePhysicalActivities: true,\n                    includeInstruction: true\n                }\n            );\n            dispatch(Actions.getCheckUpsDetailCSVReport(searchObject)).then(response => {\n                let fileName = response.payload;\n                // createBlob(fileName);    //FIXME here to download the file from the public link\n                dispatch(Actions.downloadCheckUpsByDateDetailCSVReport(fileName));\n            });\n        }\n    };\n\n    return (\n        <div>\n            <PatientBasicInformation/>\n            <PatientSocialHabitReport/>\n            <PatientFamilyDiseases/>\n            <CheckupMedicalTestResults/>\n            <CheckupDiagnosis/>\n            <CheckupDietaryHabit/>\n            <CheckupPhysicalActivity/>\n            <div className='d-flex flex-row flex-wrap  justify-content-end'>\n                {/*<CButton*/}\n                {/*    onClick={() => {*/}\n                {/*        downloadReport()*/}\n                {/*    }}*/}\n                {/*    color=\"info\"*/}\n                {/*    className=\"row-button-styles mr-2 mb-20p\">*/}\n                {/*                        <span>*/}\n                {/*                            <CIcon size={'lg'}*/}\n                {/*                                   name={'cil-arrow-thick-from-top'}*/}\n                {/*                                   style={{marginRight: '4px'}}*/}\n                {/*                            />*/}\n                {/*                        </span>*/}\n\n                {/*    Download Report*/}\n                {/*</CButton>*/}\n            </div>\n        </div>\n    );\n};\n\nexport default withReducer('patientSummery', reducer)(PatientSummeryBase);\n"]},"metadata":{},"sourceType":"module"}