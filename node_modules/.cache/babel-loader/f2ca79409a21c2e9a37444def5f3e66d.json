{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chamald\\\\Desktop\\\\Chamal\\\\react\\\\react-app\\\\src\\\\app\\\\views\\\\admin\\\\patient\\\\newPatient\\\\stepper\\\\stepComponents\\\\createInstructionNote\\\\webCam\\\\WebCamImage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport ImageCapture from \"./components/ImageCapture\";\nimport reducer from \"./store/reducers\";\nimport withReducer from \"../../../../../../../../store/withReducer\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CButton, CCardBody, CCol, CRow, CTooltip } from \"@coreui/react\";\nimport * as Action from '../webCam/store/actions/image.upload.actions';\nimport { getStorageItem } from \"../../../../../../../../../utils/StorageUtils\";\nimport Constants from \"../../../../../../../../../utils/Constants\";\nimport CIcon from \"@coreui/icons-react\"; // Upload to local seaweedFS instance\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst uploadImage = async file => {\n  const formData = new FormData();\n  let fileName = new Date().toDateString() + ' Web Cam Image';\n  formData.append(\"uploadingFile\", file, fileName);\n  return formData;\n};\n\nconst WebCamImage = () => {\n  _s();\n\n  const webCamImageData = useSelector(_ref => {\n    let {\n      webCamImage\n    } = _ref;\n    return webCamImage.webCamImageAddEdit;\n  });\n  const dispatch = useDispatch();\n  const checkupID = getStorageItem(Constants.STORAGE.CHECKUP_ID);\n  let saveObject;\n\n  const uploadImageFile = file => {\n    uploadImage(file).then(response => {\n      saveObject = response;\n      let webCamImageUploadRQ = Object.assign({}, {\n        remark: webCamImageData.formData.values ? webCamImageData.formData.values.remark : '',\n        // webCamImageID: webCamImageData.formData.values.webCamImageID,\n        // documentStorageID: webCamImageData.formData.values.documentStorageID,\n        status: webCamImageData.formData.values.status,\n        checkupID: checkupID\n      });\n      webCamImageUploadRQ.docStorageDTO = {\n        fileName: new Date().toDateString() + ' Web Cam Image',\n        description: \"Web Cam Image Description\",\n        documentType: \"Web_CAM_IMAGE\"\n      };\n      saveObject.append(\"uploadRequestData\", JSON.stringify(webCamImageUploadRQ));\n      dispatch(Action.saveOrUpdateWebCamImage(saveObject));\n    });\n  };\n\n  const removeImage = data => {\n    let removeData = Object.assign({}, data, {\n      checkupID: checkupID\n    });\n    dispatch(Action.removeWebCamImage(removeData));\n  };\n\n  useEffect(() => {\n    console.log(webCamImageData);\n    return () => {\n      dispatch(Action.onFormChange());\n    };\n  }, []);\n  useEffect(() => {\n    let checkupID = getStorageItem(Constants.STORAGE.CHECKUP_ID);\n    dispatch(Action.getWebCamImages({\n      checkupID: checkupID,\n      status: Constants.STATUS_CONST.ACT\n    }));\n  }, [dispatch, webCamImageData.imageData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CRow, {\n      children: /*#__PURE__*/_jsxDEV(CCardBody, {\n        children: /*#__PURE__*/_jsxDEV(ImageCapture, {\n          sendFile: uploadImageFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), webCamImageData.webCamImages && webCamImageData.webCamImages.map((data, index) => /*#__PURE__*/_jsxDEV(CRow, {\n      className: 'privilege-main-category-section',\n      children: [/*#__PURE__*/_jsxDEV(CCol, {\n        sm: \"6\",\n        className: \"pt-5p\",\n        children: [data.docStorageDTO && data.docStorageDTO.documentType && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `data:image/jpeg;base64,${data.docStorageDTO.document}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(CTooltip, {\n          content: 'Double Click to Remove',\n          placement: 'left-start',\n          children: /*#__PURE__*/_jsxDEV(CButton, {\n            style: {\n              position: 'absolute',\n              marginLeft: '3px'\n            },\n            onDoubleClick: () => {\n              removeImage(data);\n            },\n            color: \"danger\",\n            children: /*#__PURE__*/_jsxDEV(CIcon, {\n              size: 'sm',\n              name: \"cil-x-circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(CCol, {\n        sm: \"6\",\n        children: data.remark\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n\n_s(WebCamImage, \"6seXvLgNSY5qHHdrm1/k0D01a5c=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = WebCamImage;\nexport default withReducer('webCamImage', reducer)(WebCamImage);\n\nvar _c;\n\n$RefreshReg$(_c, \"WebCamImage\");","map":{"version":3,"sources":["C:/Users/chamald/Desktop/Chamal/react/react-app/src/app/views/admin/patient/newPatient/stepper/stepComponents/createInstructionNote/webCam/WebCamImage.js"],"names":["React","useEffect","ImageCapture","reducer","withReducer","useDispatch","useSelector","CButton","CCardBody","CCol","CRow","CTooltip","Action","getStorageItem","Constants","CIcon","uploadImage","file","formData","FormData","fileName","Date","toDateString","append","WebCamImage","webCamImageData","webCamImage","webCamImageAddEdit","dispatch","checkupID","STORAGE","CHECKUP_ID","saveObject","uploadImageFile","then","response","webCamImageUploadRQ","Object","assign","remark","values","status","docStorageDTO","description","documentType","JSON","stringify","saveOrUpdateWebCamImage","removeImage","data","removeData","removeWebCamImage","console","log","onFormChange","getWebCamImages","STATUS_CONST","ACT","imageData","webCamImages","map","index","document","position","marginLeft"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport ImageCapture from \"./components/ImageCapture\";\nimport reducer from \"./store/reducers\";\nimport withReducer from \"../../../../../../../../store/withReducer\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {CButton, CCardBody, CCol, CRow, CTooltip} from \"@coreui/react\";\nimport * as Action from '../webCam/store/actions/image.upload.actions'\nimport {getStorageItem} from \"../../../../../../../../../utils/StorageUtils\";\nimport Constants from \"../../../../../../../../../utils/Constants\";\nimport CIcon from \"@coreui/icons-react\";\n\n// Upload to local seaweedFS instance\nconst uploadImage = async file => {\n\n    const formData = new FormData();\n    let fileName = new Date().toDateString() + ' Web Cam Image';\n    formData.append(\"uploadingFile\", file, fileName);\n\n    return formData;\n};\n\n\nconst WebCamImage = () => {\n\n    const webCamImageData = useSelector(({webCamImage}) => webCamImage.webCamImageAddEdit);\n    const dispatch = useDispatch();\n    const checkupID = getStorageItem(Constants.STORAGE.CHECKUP_ID);\n    let saveObject;\n    const uploadImageFile = (file) => {\n        uploadImage(file).then(\n            (response: any) => {\n\n                saveObject = response;\n                let webCamImageUploadRQ = Object.assign({}, {\n                    remark: webCamImageData.formData.values ? webCamImageData.formData.values.remark : '',\n                    // webCamImageID: webCamImageData.formData.values.webCamImageID,\n                    // documentStorageID: webCamImageData.formData.values.documentStorageID,\n                    status: webCamImageData.formData.values.status,\n                    checkupID: checkupID\n                });\n\n                webCamImageUploadRQ.docStorageDTO = {\n                    fileName: new Date().toDateString() + ' Web Cam Image',\n                    description: \"Web Cam Image Description\",\n                    documentType: \"Web_CAM_IMAGE\"\n                };\n                saveObject.append(\"uploadRequestData\", JSON.stringify(webCamImageUploadRQ));\n                dispatch(Action.saveOrUpdateWebCamImage(saveObject));\n            }\n        );\n    };\n\n    const removeImage = (data) => {\n        let removeData = Object.assign({}, data, {checkupID: checkupID});\n        dispatch(Action.removeWebCamImage(removeData));\n    };\n\n    useEffect(() => {\n        console.log(webCamImageData);\n        return (() => {\n            dispatch(Action.onFormChange())\n        })\n    }, []);\n\n    useEffect(() => {\n        let checkupID = getStorageItem(Constants.STORAGE.CHECKUP_ID);\n        dispatch(Action.getWebCamImages({checkupID: checkupID, status: Constants.STATUS_CONST.ACT}));\n    }, [dispatch, webCamImageData.imageData]);\n\n    return (\n        <div>\n            <CRow>\n                <CCardBody>\n                    <ImageCapture sendFile={uploadImageFile}/>\n                </CCardBody>\n            </CRow>\n            {/*<CRow className={'privilege-main-category-section'}>*/}\n            {/*    <CCol sm=\"6\" className=\"pt-5p\">*/}\n            {/*        {*/}\n            {/*            webCamImageData.imageData && webCamImageData.imageData.docStorageDTO.document &&*/}\n            {/*            <img src={`data:image/jpeg;base64,${webCamImageData.imageData.docStorageDTO.document}`}/>*/}\n            {/*        }*/}\n\n            {/*    </CCol>*/}\n            {/*    <CCol sm=\"6\">*/}\n            {/*        {webCamImageData.imageData.remark}*/}\n            {/*    </CCol>*/}\n            {/*</CRow>*/}\n            {webCamImageData.webCamImages && webCamImageData.webCamImages.map((data, index) =>\n\n                <CRow className={'privilege-main-category-section'} key={index}>\n                    <CCol sm=\"6\" className=\"pt-5p\">\n                        {\n                            data.docStorageDTO && data.docStorageDTO.documentType &&\n                            <img src={`data:image/jpeg;base64,${data.docStorageDTO.document}`}/>\n                        }\n\n                        <CTooltip\n                            content={'Double Click to Remove'}\n                            placement={'left-start'}\n                        >\n                            <CButton\n                                style={{position: 'absolute', marginLeft: '3px'}}\n                                onDoubleClick={() => {\n                                    removeImage(data);\n                                }}\n                                color=\"danger\"\n                            >\n                                <CIcon size={'sm'} name={\"cil-x-circle\"}/>\n                            </CButton>\n                        </CTooltip>\n\n                    </CCol>\n                    <CCol sm=\"6\">\n                        {data.remark}\n                    </CCol>\n                </CRow>\n            )\n            }\n        </div>\n    );\n};\n\nexport default withReducer('webCamImage', reducer)(WebCamImage);"]},"metadata":{},"sourceType":"module"}