{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ChartLocation, withInBounds } from '../../common/utils/helper';\nimport { Rect, Size, measureText } from '@syncfusion/ej2-svg-base';\nimport { stopTimer, removeElement } from '../../common/utils/helper';\nimport { ChartData } from '../../chart/utils/get-data';\nimport { Tooltip as SVGTooltip } from '@syncfusion/ej2-svg-base';\n/**\n * Tooltip Module used to render the tooltip for series.\n */\n\nvar BaseTooltip =\n/** @class */\nfunction (_super) {\n  __extends(BaseTooltip, _super);\n  /**\n   * Constructor for tooltip module.\n   *\n   * @private\n   */\n\n\n  function BaseTooltip(chart) {\n    var _this = _super.call(this, chart) || this;\n\n    _this.element = _this.chart.element;\n    _this.textStyle = chart.tooltip.textStyle;\n    _this.control = chart;\n    _this.template = chart.tooltip.template;\n    return _this;\n  }\n\n  BaseTooltip.prototype.getElement = function (id) {\n    return document.getElementById(id);\n  };\n  /**\n   * Renders the tooltip.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseTooltip.prototype.getTooltipElement = function (isTooltip) {\n    this.inverted = this.chart.requireInvertedAxis;\n    this.header = this.control.tooltip.header === null ? this.control.tooltip.shared ? '<b>${point.x}</b>' : '<b>${series.name}</b>' : this.control.tooltip.header;\n    this.formattedText = [];\n    var tooltipDiv = document.getElementById(this.chart.element.id + '_tooltip');\n    var isStockChart = this.chart.element.id.indexOf('stockChart') > -1;\n\n    if (!isTooltip && !tooltipDiv || isStockChart) {\n      return this.createElement();\n    }\n\n    return null;\n  };\n\n  BaseTooltip.prototype.createElement = function () {\n    var tooltipDiv = document.createElement('div');\n    tooltipDiv.id = this.element.id + '_tooltip';\n    tooltipDiv.className = 'ejSVGTooltip';\n    tooltipDiv.style.pointerEvents = 'none';\n    tooltipDiv.style.position = 'absolute';\n    tooltipDiv.style.zIndex = '1';\n    return tooltipDiv;\n  };\n\n  BaseTooltip.prototype.pushData = function (data, isFirst, tooltipDiv, isChart) {\n    if (data.series.enableTooltip) {\n      if (isChart) {\n        this.currentPoints.push(data);\n      } else {\n        this.currentPoints.push(data);\n      }\n\n      this.stopAnimation();\n\n      if (tooltipDiv && !document.getElementById(tooltipDiv.id)) {\n        if (!this.chart.stockChart) {\n          document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n        } else {\n          document.getElementById(this.chart.stockChart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  BaseTooltip.prototype.removeHighlight = function () {\n    var item;\n    var series;\n\n    for (var i = 0, len = this.previousPoints.length; i < len; i++) {\n      item = this.previousPoints[i];\n\n      if (item.series.isRectSeries) {\n        if (item.series.visible) {\n          this.highlightPoint(item.series, item.point.index, false);\n        }\n\n        continue;\n      }\n\n      series = item.series;\n\n      if (!series.marker.visible && item.series.type !== 'Scatter' && item.series.type !== 'Bubble') {\n        this.previousPoints.shift();\n        len -= 1;\n      }\n    }\n  };\n\n  BaseTooltip.prototype.highlightPoint = function (series, pointIndex, highlight) {\n    var element = this.getElement(this.element.id + '_Series_' + series.index + '_Point_' + pointIndex);\n    var selectionModule = this.control.accumulationSelectionModule;\n    var isSelectedElement = selectionModule && selectionModule.selectedDataIndexes.length > 0 ? true : false;\n\n    if (element) {\n      if (!isSelectedElement || isSelectedElement && element.getAttribute('class') && element.getAttribute('class').indexOf('_ej2_chart_selection_series_') === -1) {\n        if (this.chart.highlightColor !== '' && !isNullOrUndefined(this.chart.highlightColor)) {\n          element.setAttribute('fill', highlight ? this.chart.highlightColor : series.pointColorMapping !== '' ? series.points[0].color : series.interior);\n        } else {\n          element.setAttribute('opacity', (highlight ? series.opacity / 2 : series.opacity).toString());\n        }\n      } else {\n        element.setAttribute('opacity', series.opacity.toString());\n      }\n    }\n  };\n\n  BaseTooltip.prototype.highlightPoints = function () {\n    for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n      var item = _a[_i];\n\n      if (item.series.isRectSeries && item.series.category === 'Series') {\n        this.highlightPoint(item.series, item.point.index, true);\n      }\n    }\n  }; // tslint:disable-next-line:max-func-body-length\n\n\n  BaseTooltip.prototype.createTooltip = function (chart, isFirst, location, clipLocation, point, shapes, offset, bounds, extraPoints, templatePoint, customTemplate) {\n    if (extraPoints === void 0) {\n      extraPoints = null;\n    }\n\n    if (templatePoint === void 0) {\n      templatePoint = null;\n    }\n\n    var series = this.currentPoints[0].series;\n    var module = chart.tooltipModule || chart.accumulationTooltipModule;\n\n    if (!module || location === null) {\n      // For the tooltip enable is false.\n      return;\n    }\n\n    var isNegative = series.isRectSeries && series.type !== 'Waterfall' && point && point.y < 0;\n    var inverted = this.chart.requireInvertedAxis && series.isRectSeries;\n    var position = null;\n\n    if (this.text.length <= 1) {\n      var contentSize = void 0;\n      var headerSize = void 0;\n      var tooltipTemplate = !customTemplate ? this.template : customTemplate;\n\n      if (tooltipTemplate && chart.getModuleName() === 'chart' && tooltipTemplate[0] !== '#' && typeof tooltipTemplate === 'string') {\n        var templateDiv = document.createElement('div');\n        templateDiv.id = 'testing_template';\n        templateDiv.className = 'ejSVGTooltip';\n        templateDiv.style.pointerEvents = 'none';\n        templateDiv.style.position = 'absolute';\n        templateDiv.style.zIndex = '1';\n        document.getElementById(this.chart.element.id + '_Secondary_Element').appendChild(templateDiv);\n        var template = tooltipTemplate.replaceAll('${x}', point.x).replaceAll('${y}', point.y);\n        templateDiv.innerHTML = template;\n        contentSize = new Size(templateDiv.firstElementChild.offsetWidth, templateDiv.firstElementChild.offsetHeight);\n        headerSize = new Size(0, 0);\n        templateDiv.remove();\n      } else {\n        contentSize = measureText(this.text[0], chart.tooltip.textStyle);\n        headerSize = !(this.header === '' || this.header === '<b></b>') ? measureText(this.header, this.textStyle) : new Size(0, 0);\n      } // marker size + arrowpadding + 2 * padding + markerpadding\n\n\n      var markerSize = 10 + 12 + 2 * 10 + 5;\n      contentSize.width = Math.max(contentSize.width, headerSize.width) + (shapes.length > 0 ? markerSize : 0);\n      var heightPadding = 12 + 2 * 10 + (headerSize.height > 0 ? 2 * 10 : 0);\n      contentSize.height = contentSize.height + headerSize.height + heightPadding;\n      position = this.getCurrentPosition(isNegative, inverted);\n      position = this.getPositionBySize(contentSize, new Rect(0, 0, bounds.width, bounds.height), location, position);\n      isNegative = position === 'Left' || position === 'Bottom';\n      inverted = position === 'Left' || position === 'Right';\n    } // else if (tooltipPosition !== 'None' && this.text.length <= 1) {\n    //     position = tooltipPosition as TooltipPlacement;\n    //     isNegative = (position === 'Left') || (position === 'Bottom');\n    //     inverted = (position === 'Left') || (position === 'Right');\n    // }\n\n\n    if (isFirst) {\n      this.svgTooltip = new SVGTooltip({\n        opacity: chart.tooltip.opacity,\n        header: this.headerText,\n        content: this.text,\n        fill: chart.tooltip.fill,\n        border: chart.tooltip.border,\n        enableAnimation: chart.tooltip.enableAnimation,\n        location: location,\n        shared: chart.tooltip.shared,\n        shapes: shapes,\n        clipBounds: this.chart.chartAreaType === 'PolarRadar' ? new ChartLocation(0, 0) : clipLocation,\n        areaBounds: bounds,\n        palette: this.findPalette(),\n        template: customTemplate || this.template,\n        data: templatePoint,\n        theme: chart.theme,\n        offset: offset,\n        textStyle: chart.tooltip.textStyle,\n        isNegative: isNegative,\n        inverted: inverted,\n        arrowPadding: this.text.length > 1 || this.chart.stockChart ? 0 : 12,\n        availableSize: chart.availableSize,\n        duration: this.chart.tooltip.duration,\n        isCanvas: this.chart.enableCanvas,\n        isTextWrap: chart.tooltip.enableTextWrap && chart.getModuleName() === 'chart',\n        blazorTemplate: {\n          name: 'Template',\n          parent: this.chart.tooltip\n        },\n        controlInstance: this.chart,\n        tooltipPlacement: position,\n        enableRTL: chart.enableRtl,\n        tooltipRender: function () {\n          module.removeHighlight();\n          module.highlightPoints();\n          module.updatePreviousPoint(extraPoints);\n        },\n        animationComplete: function (args) {\n          if (args.tooltip.fadeOuted) {\n            module.fadeOut(module.previousPoints);\n          }\n        }\n      }, '#' + this.element.id + '_tooltip');\n    } else {\n      if (this.svgTooltip) {\n        this.svgTooltip.location = location;\n        this.svgTooltip.content = this.text;\n        this.svgTooltip.header = this.headerText;\n        this.svgTooltip.offset = offset;\n        this.svgTooltip.palette = this.findPalette();\n        this.svgTooltip.shapes = shapes;\n        this.svgTooltip.data = templatePoint;\n        this.svgTooltip.template = this.template;\n        this.svgTooltip.textStyle = chart.tooltip.textStyle;\n        this.svgTooltip.isNegative = isNegative;\n        this.svgTooltip.inverted = inverted;\n        this.svgTooltip.clipBounds = this.chart.chartAreaType === 'PolarRadar' ? new ChartLocation(0, 0) : clipLocation;\n        this.svgTooltip.arrowPadding = this.text.length > 1 || this.chart.stockChart ? 0 : 12;\n        this.svgTooltip.tooltipPlacement = position;\n        this.svgTooltip.dataBind();\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (this.chart.isReact) {\n      this.chart.renderReactTemplates();\n    }\n  };\n\n  BaseTooltip.prototype.getPositionBySize = function (textSize, bounds, arrowLocation, position) {\n    var isTop = this.isTooltipFitPosition('Top', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n    var isBottom = this.isTooltipFitPosition('Bottom', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n    var isRight = this.isTooltipFitPosition('Right', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n    var isLeft = this.isTooltipFitPosition('Left', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n    var tooltipPos;\n\n    if (isTop || isBottom || isRight || isLeft) {\n      if (position === 'Top') {\n        tooltipPos = isTop ? 'Top' : isBottom ? 'Bottom' : isRight ? 'Right' : 'Left';\n      } else if (position === 'Bottom') {\n        tooltipPos = isBottom ? 'Bottom' : isTop ? 'Top' : isRight ? 'Right' : 'Left';\n      } else if (position === 'Right') {\n        tooltipPos = isRight ? 'Right' : isLeft ? 'Left' : isTop ? 'Top' : 'Bottom';\n      } else {\n        tooltipPos = isLeft ? 'Left' : isRight ? 'Right' : isTop ? 'Top' : 'Bottom';\n      }\n    } else {\n      var size = [arrowLocation.x - bounds.x, bounds.x + bounds.width - arrowLocation.x, arrowLocation.y - bounds.y, bounds.y + bounds.height - arrowLocation.y];\n      var index = size.indexOf(Math.max.apply(this, size));\n      position = index === 0 ? 'Left' : index === 1 ? 'Right' : index === 2 ? 'Top' : 'Bottom';\n      return position;\n    }\n\n    return tooltipPos;\n  };\n\n  BaseTooltip.prototype.isTooltipFitPosition = function (position, bounds, location, size) {\n    var start = new ChartLocation(0, 0);\n    var end = new ChartLocation(0, 0);\n\n    switch (position) {\n      case 'Top':\n        start.x = location.x - size.width / 2;\n        start.y = location.y - size.height;\n        end.x = location.x + size.width / 2;\n        end.y = location.y;\n        break;\n\n      case 'Bottom':\n        start.x = location.x - size.width / 2;\n        start.y = location.y;\n        end.x = location.x + size.width / 2;\n        end.y = location.y + size.height;\n        break;\n\n      case 'Right':\n        start.x = location.x;\n        start.y = location.y - size.height / 2;\n        end.x = location.x + size.width;\n        end.y = location.y + size.height / 2;\n        break;\n\n      case 'Left':\n        start.x = location.x - size.width;\n        start.y = location.y - size.height / 2;\n        end.x = location.x;\n        end.y = location.y + size.height / 2;\n        break;\n    }\n\n    return withInBounds(start.x, start.y, bounds) && withInBounds(end.x, end.y, bounds);\n  };\n\n  BaseTooltip.prototype.getCurrentPosition = function (isNegative, inverted) {\n    var position;\n\n    if (inverted) {\n      position = isNegative ? 'Left' : 'Right';\n    } else {\n      position = isNegative ? 'Bottom' : 'Top';\n    }\n\n    return position;\n  };\n\n  BaseTooltip.prototype.findPalette = function () {\n    var colors = [];\n\n    for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n      var data = _a[_i];\n      colors.push(this.findColor(data, data.series));\n    }\n\n    return colors;\n  };\n\n  BaseTooltip.prototype.findColor = function (data, series) {\n    if (series.isRectSeries && (series.type === 'Candle' || series.type === 'Hilo' || series.type === 'HiloOpenClose')) {\n      return data.point.color;\n    } else {\n      return (data.point.color && data.point.color !== '#ffffff' ? data.point.color : data.point.interior) || series.marker.fill || series.interior;\n    }\n  };\n\n  BaseTooltip.prototype.updatePreviousPoint = function (extraPoints) {\n    if (extraPoints) {\n      this.currentPoints = this.currentPoints.concat(extraPoints);\n    }\n\n    this.previousPoints = extend([], this.currentPoints, null, true);\n  };\n\n  BaseTooltip.prototype.fadeOut = function (data) {\n    var svgElement = this.chart.enableCanvas ? this.getElement(this.element.id + '_tooltip_group') : this.getElement(this.element.id + '_tooltip_svg');\n    var isTooltip = svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0;\n\n    if (!isTooltip) {\n      this.valueX = null;\n      this.valueY = null;\n      this.currentPoints = [];\n      this.removeHighlight();\n      this.removeHighlightedMarker(data);\n      this.svgTooltip = null;\n      this.control.trigger('animationComplete', {});\n    }\n  };\n  /*\n  * @hidden\n  */\n\n\n  BaseTooltip.prototype.removeHighlightedMarker = function (data) {\n    if (this.chart.markerRender) {\n      for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n        var item = data_1[_i];\n        removeElement(this.element.id + '_Series_' + item.series.index + '_Point_' + item.point.index + '_Trackball');\n      }\n\n      this.chart.markerRender.removeHighlightedMarker();\n    }\n\n    this.previousPoints = [];\n  }; // public triggerEvent(point: PointData | AccPointData, isFirst: boolean, textCollection: string, firstText: boolean = true): boolean {\n  //     let argsData: ITooltipRenderEventArgs = {\n  //         cancel: false, name: tooltipRender, text: textCollection,\n  //         point: point.point, series: point.series, textStyle: this.textStyle\n  //     };\n  //     this.chart.trigger(tooltipRender, argsData);\n  //     if (!argsData.cancel) {\n  //         if (point.series.type === 'BoxAndWhisker') {\n  //             this.removeText();\n  //             isFirst = true;\n  //         }\n  //         this.formattedText = this.formattedText.concat(argsData.text);\n  //         this.text = this.formattedText;\n  //     }\n  //     return !argsData.cancel;\n  // }\n\n\n  BaseTooltip.prototype.removeText = function () {\n    this.textElements = [];\n    var element = this.getElement(this.element.id + '_tooltip_group');\n\n    if (element && element.childNodes.length > 0) {\n      while (element.lastChild && element.childNodes.length !== 1) {\n        element.removeChild(element.lastChild);\n      }\n    }\n  };\n\n  BaseTooltip.prototype.stopAnimation = function () {\n    stopTimer(this.toolTipInterval);\n  };\n  /**\n   * Removes the tooltip on mouse leave.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  BaseTooltip.prototype.removeTooltip = function (duration) {\n    var _this = this;\n\n    var tooltipElement = this.getElement(this.element.id + '_tooltip');\n    var tooltipTemplate = tooltipElement ? this.getElement(tooltipElement.id + 'parent_template') : null;\n    var isTemplateRendered = tooltipTemplate && tooltipTemplate.innerHTML !== '<div></div>';\n    this.stopAnimation(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.chart.isReact && isTemplateRendered) {\n      this.chart.clearTemplate([tooltipTemplate.id], [0]);\n    }\n\n    if (tooltipElement && this.previousPoints.length > 0) {\n      this.toolTipInterval = +setTimeout(function () {\n        if (_this.svgTooltip) {\n          _this.svgTooltip.fadeOut();\n        }\n      }, duration);\n    }\n  };\n\n  return BaseTooltip;\n}(ChartData);\n\nexport { BaseTooltip };","map":{"version":3,"sources":["C:/Users/chamald/Desktop/Chamal/react/react-app/node_modules/@syncfusion/ej2-charts/src/common/user-interaction/tooltip.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","isNullOrUndefined","ChartLocation","withInBounds","Rect","Size","measureText","stopTimer","removeElement","ChartData","Tooltip","SVGTooltip","BaseTooltip","_super","chart","_this","call","element","textStyle","tooltip","control","template","getElement","id","document","getElementById","getTooltipElement","isTooltip","inverted","requireInvertedAxis","header","shared","formattedText","tooltipDiv","isStockChart","indexOf","createElement","className","style","pointerEvents","position","zIndex","pushData","data","isFirst","isChart","series","enableTooltip","currentPoints","push","stopAnimation","stockChart","appendChild","removeHighlight","item","i","len","previousPoints","length","isRectSeries","visible","highlightPoint","point","index","marker","type","shift","pointIndex","highlight","selectionModule","accumulationSelectionModule","isSelectedElement","selectedDataIndexes","getAttribute","highlightColor","setAttribute","pointColorMapping","points","color","interior","opacity","toString","highlightPoints","_i","_a","category","createTooltip","location","clipLocation","shapes","offset","bounds","extraPoints","templatePoint","customTemplate","module","tooltipModule","accumulationTooltipModule","isNegative","y","text","contentSize","headerSize","tooltipTemplate","getModuleName","templateDiv","replaceAll","x","innerHTML","firstElementChild","offsetWidth","offsetHeight","remove","markerSize","width","Math","max","heightPadding","height","getCurrentPosition","getPositionBySize","svgTooltip","headerText","content","fill","border","enableAnimation","clipBounds","chartAreaType","areaBounds","palette","findPalette","theme","arrowPadding","availableSize","duration","isCanvas","enableCanvas","isTextWrap","enableTextWrap","blazorTemplate","name","parent","controlInstance","tooltipPlacement","enableRTL","enableRtl","tooltipRender","updatePreviousPoint","animationComplete","args","fadeOuted","fadeOut","dataBind","isReact","renderReactTemplates","textSize","arrowLocation","isTop","isTooltipFitPosition","isBottom","isRight","isLeft","tooltipPos","size","apply","start","end","colors","findColor","concat","svgElement","parseInt","valueX","valueY","removeHighlightedMarker","trigger","markerRender","data_1","removeText","textElements","childNodes","lastChild","removeChild","toolTipInterval","removeTooltip","tooltipElement","isTemplateRendered","clearTemplate","setTimeout"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ChartLocation, withInBounds } from '../../common/utils/helper';\nimport { Rect, Size, measureText } from '@syncfusion/ej2-svg-base';\nimport { stopTimer, removeElement } from '../../common/utils/helper';\nimport { ChartData } from '../../chart/utils/get-data';\nimport { Tooltip as SVGTooltip } from '@syncfusion/ej2-svg-base';\n/**\n * Tooltip Module used to render the tooltip for series.\n */\nvar BaseTooltip = /** @class */ (function (_super) {\n    __extends(BaseTooltip, _super);\n    /**\n     * Constructor for tooltip module.\n     *\n     * @private\n     */\n    function BaseTooltip(chart) {\n        var _this = _super.call(this, chart) || this;\n        _this.element = _this.chart.element;\n        _this.textStyle = chart.tooltip.textStyle;\n        _this.control = chart;\n        _this.template = chart.tooltip.template;\n        return _this;\n    }\n    BaseTooltip.prototype.getElement = function (id) {\n        return document.getElementById(id);\n    };\n    /**\n     * Renders the tooltip.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseTooltip.prototype.getTooltipElement = function (isTooltip) {\n        this.inverted = this.chart.requireInvertedAxis;\n        this.header = (this.control.tooltip.header === null) ?\n            ((this.control.tooltip.shared) ? '<b>${point.x}</b>' : '<b>${series.name}</b>')\n            : (this.control.tooltip.header);\n        this.formattedText = [];\n        var tooltipDiv = document.getElementById(this.chart.element.id + '_tooltip');\n        var isStockChart = this.chart.element.id.indexOf('stockChart') > -1;\n        if (!isTooltip && !tooltipDiv || isStockChart) {\n            return this.createElement();\n        }\n        return null;\n    };\n    BaseTooltip.prototype.createElement = function () {\n        var tooltipDiv = document.createElement('div');\n        tooltipDiv.id = this.element.id + '_tooltip';\n        tooltipDiv.className = 'ejSVGTooltip';\n        tooltipDiv.style.pointerEvents = 'none';\n        tooltipDiv.style.position = 'absolute';\n        tooltipDiv.style.zIndex = '1';\n        return tooltipDiv;\n    };\n    BaseTooltip.prototype.pushData = function (data, isFirst, tooltipDiv, isChart) {\n        if (data.series.enableTooltip) {\n            if (isChart) {\n                this.currentPoints.push(data);\n            }\n            else {\n                this.currentPoints.push(data);\n            }\n            this.stopAnimation();\n            if (tooltipDiv && !document.getElementById(tooltipDiv.id)) {\n                if (!this.chart.stockChart) {\n                    document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n                }\n                else {\n                    document.getElementById(this.chart.stockChart.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseTooltip.prototype.removeHighlight = function () {\n        var item;\n        var series;\n        for (var i = 0, len = this.previousPoints.length; i < len; i++) {\n            item = this.previousPoints[i];\n            if (item.series.isRectSeries) {\n                if (item.series.visible) {\n                    this.highlightPoint(item.series, item.point.index, false);\n                }\n                continue;\n            }\n            series = item.series;\n            if (!series.marker.visible && item.series.type !== 'Scatter' && item.series.type !== 'Bubble') {\n                this.previousPoints.shift();\n                len -= 1;\n            }\n        }\n    };\n    BaseTooltip.prototype.highlightPoint = function (series, pointIndex, highlight) {\n        var element = this.getElement(this.element.id + '_Series_' + series.index + '_Point_' + pointIndex);\n        var selectionModule = this.control.accumulationSelectionModule;\n        var isSelectedElement = selectionModule && selectionModule.selectedDataIndexes.length > 0 ? true : false;\n        if (element) {\n            if ((!isSelectedElement || isSelectedElement && element.getAttribute('class')\n                && element.getAttribute('class').indexOf('_ej2_chart_selection_series_') === -1)) {\n                if (this.chart.highlightColor !== '' && !isNullOrUndefined(this.chart.highlightColor)) {\n                    element.setAttribute('fill', (highlight ? this.chart.highlightColor : series.pointColorMapping !== '' ? (series.points[0]).color : series.interior));\n                }\n                else {\n                    element.setAttribute('opacity', (highlight ? series.opacity / 2 : series.opacity).toString());\n                }\n            }\n            else {\n                element.setAttribute('opacity', series.opacity.toString());\n            }\n        }\n    };\n    BaseTooltip.prototype.highlightPoints = function () {\n        for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.series.isRectSeries && item.series.category === 'Series') {\n                this.highlightPoint(item.series, item.point.index, true);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BaseTooltip.prototype.createTooltip = function (chart, isFirst, location, clipLocation, point, shapes, offset, bounds, extraPoints, templatePoint, customTemplate) {\n        if (extraPoints === void 0) { extraPoints = null; }\n        if (templatePoint === void 0) { templatePoint = null; }\n        var series = this.currentPoints[0].series;\n        var module = chart.tooltipModule || chart.accumulationTooltipModule;\n        if (!module || location === null) { // For the tooltip enable is false.\n            return;\n        }\n        var isNegative = (series.isRectSeries && series.type !== 'Waterfall' && point && point.y < 0);\n        var inverted = this.chart.requireInvertedAxis && series.isRectSeries;\n        var position = null;\n        if (this.text.length <= 1) {\n            var contentSize = void 0;\n            var headerSize = void 0;\n            var tooltipTemplate = !customTemplate ? this.template : customTemplate;\n            if (tooltipTemplate && chart.getModuleName() === 'chart' && tooltipTemplate[0] !== '#' && typeof tooltipTemplate === 'string') {\n                var templateDiv = document.createElement('div');\n                templateDiv.id = 'testing_template';\n                templateDiv.className = 'ejSVGTooltip';\n                templateDiv.style.pointerEvents = 'none';\n                templateDiv.style.position = 'absolute';\n                templateDiv.style.zIndex = '1';\n                document.getElementById(this.chart.element.id + '_Secondary_Element').appendChild(templateDiv);\n                var template = tooltipTemplate.replaceAll('${x}', point.x).replaceAll('${y}', point.y);\n                templateDiv.innerHTML = template;\n                contentSize = new Size(templateDiv.firstElementChild.offsetWidth, templateDiv.firstElementChild.offsetHeight);\n                headerSize = new Size(0, 0);\n                templateDiv.remove();\n            }\n            else {\n                contentSize = measureText(this.text[0], chart.tooltip.textStyle);\n                headerSize = (!(this.header === '' || this.header === '<b></b>')) ? measureText(this.header, this.textStyle) :\n                    new Size(0, 0);\n            }\n            // marker size + arrowpadding + 2 * padding + markerpadding\n            var markerSize = 10 + 12 + (2 * 10) + 5;\n            contentSize.width = Math.max(contentSize.width, headerSize.width) + ((shapes.length > 0) ? markerSize : 0);\n            var heightPadding = 12 + (2 * 10) + (headerSize.height > 0 ? (2 * 10) : 0);\n            contentSize.height = contentSize.height + headerSize.height + heightPadding;\n            position = this.getCurrentPosition(isNegative, inverted);\n            position = this.getPositionBySize(contentSize, new Rect(0, 0, bounds.width, bounds.height), location, position);\n            isNegative = (position === 'Left') || (position === 'Bottom');\n            inverted = (position === 'Left') || (position === 'Right');\n        }\n        // else if (tooltipPosition !== 'None' && this.text.length <= 1) {\n        //     position = tooltipPosition as TooltipPlacement;\n        //     isNegative = (position === 'Left') || (position === 'Bottom');\n        //     inverted = (position === 'Left') || (position === 'Right');\n        // }\n        if (isFirst) {\n            this.svgTooltip = new SVGTooltip({\n                opacity: chart.tooltip.opacity,\n                header: this.headerText,\n                content: this.text,\n                fill: chart.tooltip.fill,\n                border: chart.tooltip.border,\n                enableAnimation: chart.tooltip.enableAnimation,\n                location: location,\n                shared: chart.tooltip.shared,\n                shapes: shapes,\n                clipBounds: this.chart.chartAreaType === 'PolarRadar' ? new ChartLocation(0, 0) : clipLocation,\n                areaBounds: bounds,\n                palette: this.findPalette(),\n                template: customTemplate || this.template,\n                data: templatePoint,\n                theme: chart.theme,\n                offset: offset,\n                textStyle: chart.tooltip.textStyle,\n                isNegative: isNegative,\n                inverted: inverted,\n                arrowPadding: this.text.length > 1 || this.chart.stockChart ? 0 : 12,\n                availableSize: chart.availableSize,\n                duration: this.chart.tooltip.duration,\n                isCanvas: this.chart.enableCanvas,\n                isTextWrap: chart.tooltip.enableTextWrap && chart.getModuleName() === 'chart',\n                blazorTemplate: { name: 'Template', parent: this.chart.tooltip },\n                controlInstance: this.chart,\n                tooltipPlacement: position,\n                enableRTL: chart.enableRtl,\n                tooltipRender: function () {\n                    module.removeHighlight();\n                    module.highlightPoints();\n                    module.updatePreviousPoint(extraPoints);\n                },\n                animationComplete: function (args) {\n                    if (args.tooltip.fadeOuted) {\n                        module.fadeOut(module.previousPoints);\n                    }\n                }\n            }, '#' + this.element.id + '_tooltip');\n        }\n        else {\n            if (this.svgTooltip) {\n                this.svgTooltip.location = location;\n                this.svgTooltip.content = this.text;\n                this.svgTooltip.header = this.headerText;\n                this.svgTooltip.offset = offset;\n                this.svgTooltip.palette = this.findPalette();\n                this.svgTooltip.shapes = shapes;\n                this.svgTooltip.data = templatePoint;\n                this.svgTooltip.template = this.template;\n                this.svgTooltip.textStyle = chart.tooltip.textStyle;\n                this.svgTooltip.isNegative = isNegative;\n                this.svgTooltip.inverted = inverted;\n                this.svgTooltip.clipBounds = this.chart.chartAreaType === 'PolarRadar' ? new ChartLocation(0, 0) : clipLocation;\n                this.svgTooltip.arrowPadding = this.text.length > 1 || this.chart.stockChart ? 0 : 12;\n                this.svgTooltip.tooltipPlacement = position;\n                this.svgTooltip.dataBind();\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.chart.isReact) {\n            this.chart.renderReactTemplates();\n        }\n    };\n    BaseTooltip.prototype.getPositionBySize = function (textSize, bounds, arrowLocation, position) {\n        var isTop = this.isTooltipFitPosition('Top', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n        var isBottom = this.isTooltipFitPosition('Bottom', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n        var isRight = this.isTooltipFitPosition('Right', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n        var isLeft = this.isTooltipFitPosition('Left', new Rect(0, 0, bounds.width, bounds.height), arrowLocation, textSize);\n        var tooltipPos;\n        if (isTop || isBottom || isRight || isLeft) {\n            if (position === 'Top') {\n                tooltipPos = isTop ? 'Top' : (isBottom ? 'Bottom' : (isRight ? 'Right' : 'Left'));\n            }\n            else if (position === 'Bottom') {\n                tooltipPos = isBottom ? 'Bottom' : (isTop ? 'Top' : (isRight ? 'Right' : 'Left'));\n            }\n            else if (position === 'Right') {\n                tooltipPos = isRight ? 'Right' : (isLeft ? 'Left' : (isTop ? 'Top' : 'Bottom'));\n            }\n            else {\n                tooltipPos = isLeft ? 'Left' : (isRight ? 'Right' : (isTop ? 'Top' : 'Bottom'));\n            }\n        }\n        else {\n            var size = [(arrowLocation.x - bounds.x), ((bounds.x + bounds.width) - arrowLocation.x),\n                (arrowLocation.y - bounds.y), ((bounds.y + bounds.height) - arrowLocation.y)];\n            var index = size.indexOf(Math.max.apply(this, size));\n            position = (index === 0) ? 'Left' : (index === 1) ? 'Right' : (index === 2) ? 'Top' : 'Bottom';\n            return position;\n        }\n        return tooltipPos;\n    };\n    BaseTooltip.prototype.isTooltipFitPosition = function (position, bounds, location, size) {\n        var start = new ChartLocation(0, 0);\n        var end = new ChartLocation(0, 0);\n        switch (position) {\n            case 'Top':\n                start.x = location.x - (size.width / 2);\n                start.y = location.y - size.height;\n                end.x = location.x + (size.width / 2);\n                end.y = location.y;\n                break;\n            case 'Bottom':\n                start.x = location.x - (size.width / 2);\n                start.y = location.y;\n                end.x = location.x + (size.width / 2);\n                end.y = location.y + size.height;\n                break;\n            case 'Right':\n                start.x = location.x;\n                start.y = location.y - (size.height / 2);\n                end.x = location.x + size.width;\n                end.y = location.y + (size.height / 2);\n                break;\n            case 'Left':\n                start.x = location.x - size.width;\n                start.y = location.y - (size.height / 2);\n                end.x = location.x;\n                end.y = location.y + (size.height / 2);\n                break;\n        }\n        return (withInBounds(start.x, start.y, bounds) && withInBounds(end.x, end.y, bounds));\n    };\n    BaseTooltip.prototype.getCurrentPosition = function (isNegative, inverted) {\n        var position;\n        if (inverted) {\n            position = isNegative ? 'Left' : 'Right';\n        }\n        else {\n            position = isNegative ? 'Bottom' : 'Top';\n        }\n        return position;\n    };\n    BaseTooltip.prototype.findPalette = function () {\n        var colors = [];\n        for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n            var data = _a[_i];\n            colors.push(this.findColor(data, data.series));\n        }\n        return colors;\n    };\n    BaseTooltip.prototype.findColor = function (data, series) {\n        if (series.isRectSeries && (series.type === 'Candle' || series.type === 'Hilo' || series.type === 'HiloOpenClose')) {\n            return data.point.color;\n        }\n        else {\n            return (data.point.color && data.point.color !== '#ffffff' ? data.point.color\n                : data.point.interior) ||\n                series.marker.fill || series.interior;\n        }\n    };\n    BaseTooltip.prototype.updatePreviousPoint = function (extraPoints) {\n        if (extraPoints) {\n            this.currentPoints = this.currentPoints.concat(extraPoints);\n        }\n        this.previousPoints = extend([], this.currentPoints, null, true);\n    };\n    BaseTooltip.prototype.fadeOut = function (data) {\n        var svgElement = this.chart.enableCanvas ? this.getElement(this.element.id + '_tooltip_group') :\n            this.getElement(this.element.id + '_tooltip_svg');\n        var isTooltip = (svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0);\n        if (!isTooltip) {\n            this.valueX = null;\n            this.valueY = null;\n            this.currentPoints = [];\n            this.removeHighlight();\n            this.removeHighlightedMarker(data);\n            this.svgTooltip = null;\n            this.control.trigger('animationComplete', {});\n        }\n    };\n    /*\n    * @hidden\n    */\n    BaseTooltip.prototype.removeHighlightedMarker = function (data) {\n        if (this.chart.markerRender) {\n            for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n                var item = data_1[_i];\n                removeElement(this.element.id + '_Series_' + item.series.index +\n                    '_Point_' + item.point.index + '_Trackball');\n            }\n            this.chart.markerRender.removeHighlightedMarker();\n        }\n        this.previousPoints = [];\n    };\n    // public triggerEvent(point: PointData | AccPointData, isFirst: boolean, textCollection: string, firstText: boolean = true): boolean {\n    //     let argsData: ITooltipRenderEventArgs = {\n    //         cancel: false, name: tooltipRender, text: textCollection,\n    //         point: point.point, series: point.series, textStyle: this.textStyle\n    //     };\n    //     this.chart.trigger(tooltipRender, argsData);\n    //     if (!argsData.cancel) {\n    //         if (point.series.type === 'BoxAndWhisker') {\n    //             this.removeText();\n    //             isFirst = true;\n    //         }\n    //         this.formattedText = this.formattedText.concat(argsData.text);\n    //         this.text = this.formattedText;\n    //     }\n    //     return !argsData.cancel;\n    // }\n    BaseTooltip.prototype.removeText = function () {\n        this.textElements = [];\n        var element = this.getElement(this.element.id + '_tooltip_group');\n        if (element && element.childNodes.length > 0) {\n            while (element.lastChild && element.childNodes.length !== 1) {\n                element.removeChild(element.lastChild);\n            }\n        }\n    };\n    BaseTooltip.prototype.stopAnimation = function () {\n        stopTimer(this.toolTipInterval);\n    };\n    /**\n     * Removes the tooltip on mouse leave.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseTooltip.prototype.removeTooltip = function (duration) {\n        var _this = this;\n        var tooltipElement = this.getElement(this.element.id + '_tooltip');\n        var tooltipTemplate = tooltipElement ? this.getElement(tooltipElement.id + 'parent_template') : null;\n        var isTemplateRendered = tooltipTemplate && tooltipTemplate.innerHTML !== '<div></div>';\n        this.stopAnimation();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.chart.isReact && isTemplateRendered) {\n            this.chart.clearTemplate([tooltipTemplate.id], [0]);\n        }\n        if (tooltipElement && this.previousPoints.length > 0) {\n            this.toolTipInterval = +setTimeout(function () {\n                if (_this.svgTooltip) {\n                    _this.svgTooltip.fadeOut();\n                }\n            }, duration);\n        }\n    };\n    return BaseTooltip;\n}(ChartData));\nexport { BaseTooltip };\n"]},"metadata":{},"sourceType":"module"}